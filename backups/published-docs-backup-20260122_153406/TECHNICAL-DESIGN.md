# ankrBFC + Swayam Technical Design Document

## Executive Summary

**Vision**: Swayam is a consumer-facing personal finance companion that captures behavioral intelligence across all banks and insurance providers. ankrBFC is the B2B platform where banks and insurers subscribe to receive anonymized insights, risk signals, and qualified leads.

**Key Insight**: We don't bring the bot to banks. We bring Swayam to people as their financial "Mitra" (friend). The consolidated behavioral data from millions of users becomes the intelligence layer that banks pay for.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         THE ANKR FINANCIAL ECOSYSTEM                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚   CONSUMER SIDE (B2C)                    BUSINESS SIDE (B2B)           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚
â”‚                                                                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚        â”‚
â”‚   â”‚   SWAYAM / MITRA    â”‚    Data +     â”‚     ankrBFC         â”‚        â”‚
â”‚   â”‚   Consumer App      â”‚â”€â”€â”€Insightsâ”€â”€â”€â–ºâ”‚   B2B Platform      â”‚        â”‚
â”‚   â”‚                     â”‚               â”‚                     â”‚        â”‚
â”‚   â”‚   â€¢ 10M+ Users      â”‚               â”‚   â€¢ 50+ Banks       â”‚        â”‚
â”‚   â”‚   â€¢ All their banks â”‚               â”‚   â€¢ 20+ Insurers    â”‚        â”‚
â”‚   â”‚   â€¢ All policies    â”‚               â”‚                     â”‚        â”‚
â”‚   â”‚   â€¢ Voice AI        â”‚               â”‚   Subscribe for:    â”‚        â”‚
â”‚   â”‚   â€¢ Gamification    â”‚               â”‚   â€¢ Risk Signals    â”‚        â”‚
â”‚   â”‚   â€¢ Financial Coach â”‚               â”‚   â€¢ Lead Generation â”‚        â”‚
â”‚   â”‚                     â”‚               â”‚   â€¢ Churn Alerts    â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚   â€¢ Market Intel    â”‚        â”‚
â”‚            â”‚                            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚            â”‚                                      â”‚                     â”‚
â”‚            â”‚ Consent                              â”‚ API/Dashboard       â”‚
â”‚            â–¼                                      â–¼                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚   â”‚                     ANKR INTELLIGENCE CORE                   â”‚      â”‚
â”‚   â”‚   EON Memory â”‚ AI Proxy â”‚ pgvector â”‚ Complymitra            â”‚      â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Table of Contents

1. [Business Model](#1-business-model)
2. [System Architecture](#2-system-architecture)
3. [Swayam Consumer App](#3-swayam-consumer-app)
4. [ankrBFC B2B Platform](#4-ankrbfc-b2b-platform)
5. [Data Architecture](#5-data-architecture)
6. [Privacy & Consent Framework](#6-privacy--consent-framework)
7. [Tech Stack](#7-tech-stack)
8. [Security & Guardrails](#8-security--guardrails)
9. [Integration Patterns](#9-integration-patterns)
10. [Deployment Architecture](#10-deployment-architecture)
11. [Compliance & Regulatory](#11-compliance--regulatory)
12. [Roadmap](#12-roadmap)

---

## 1. Business Model

### 1.1 Revenue Streams

| Stream | Description | Pricing Model |
|--------|-------------|---------------|
| **Insight Subscription** | Banks subscribe for behavioral insights | â‚¹X per active customer matched |
| **Lead Generation** | Qualified leads with consent | Cost per lead (CPL) |
| **Risk Signals API** | Real-time risk scoring for underwriting | Per API call |
| **Market Intelligence** | Aggregated market trends, competitor analysis | Monthly subscription |
| **White-label SDK** | Banks embed Swayam in their app | License + revenue share |

### 1.2 Value Exchange

**Consumer (Swayam User) Gets:**
- Free personal finance dashboard (all banks, all policies)
- AI financial coach in their language
- Bill reminders, payment tracking
- Gamification rewards (actual cashback, discounts)
- Credit score monitoring
- Investment suggestions
- Insurance gap analysis

**Consumer Gives (with explicit consent):**
- Permission to analyze transactions (anonymized)
- Permission to share insights with specific providers
- Behavioral patterns for personalization

**Bank/Insurer Gets:**
- Anonymized behavioral segments
- Qualified leads (user opted-in)
- Churn prediction for their customers
- Cross-sell opportunities
- Risk signals for underwriting
- Market share intelligence

### 1.3 Similar Models (Reference)

| Company | Model | Our Differentiation |
|---------|-------|---------------------|
| Credit Karma (US) | Free credit score â†’ sell leads | Voice-first, vernacular, India-focused |
| Plaid (US) | Account aggregation API | On-device AI, privacy-first |
| Cred (India) | Rewards for bill pay | Beyond payments - full financial coach |
| INDmoney (India) | Wealth dashboard | Behavioral intelligence layer |

---

## 2. System Architecture

### 2.1 High-Level Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              CONSUMER LAYER                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚ Swayam App    â”‚  â”‚ Swayam App    â”‚  â”‚ Swayam Web    â”‚                  â”‚
â”‚   â”‚ (Android)     â”‚  â”‚ (iOS)         â”‚  â”‚ (PWA)         â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚           â”‚                  â”‚                  â”‚                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚   â”‚              ON-DEVICE INTELLIGENCE                  â”‚                  â”‚
â”‚   â”‚  â€¢ Swayam Local LLM (Phi-3 / Gemma 2B)              â”‚                  â”‚
â”‚   â”‚  â€¢ Edge ML (TensorFlow Lite)                         â”‚                  â”‚
â”‚   â”‚  â€¢ Local Gamification State                          â”‚                  â”‚
â”‚   â”‚  â€¢ Encrypted Local Storage                           â”‚                  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                             â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚ Encrypted Sync (Consent-gated)
                              â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             â”‚        PLATFORM LAYER                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                             â–¼                                               â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                        API GATEWAY                                   â”‚  â”‚
â”‚   â”‚  â€¢ Rate Limiting  â€¢ Auth (JWT + Device)  â€¢ Request Routing          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                  â”‚                  â”‚                  â”‚                    â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚   â”‚  Swayam Backend   â”‚  â”‚  ankrBFC Backend  â”‚  â”‚  Integration Hub   â”‚    â”‚
â”‚   â”‚  (Consumer APIs)  â”‚  â”‚  (B2B APIs)       â”‚  â”‚  (AA, CBS, etc.)   â”‚    â”‚
â”‚   â”‚                   â”‚  â”‚                   â”‚  â”‚                    â”‚    â”‚
â”‚   â”‚  â€¢ User Mgmt      â”‚  â”‚  â€¢ Tenant Mgmt    â”‚  â”‚  â€¢ Account Agg.    â”‚    â”‚
â”‚   â”‚  â€¢ Sync Service   â”‚  â”‚  â€¢ Insights API   â”‚  â”‚  â€¢ Insurance Repo  â”‚    â”‚
â”‚   â”‚  â€¢ Gamification   â”‚  â”‚  â€¢ Leads API      â”‚  â”‚  â€¢ Credit Bureau   â”‚    â”‚
â”‚   â”‚  â€¢ Notifications  â”‚  â”‚  â€¢ Analytics      â”‚  â”‚  â€¢ UPI/NPCI        â”‚    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚            â”‚                      â”‚                       â”‚                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      INTELLIGENCE LAYER                             â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚  â”‚ Episode     â”‚  â”‚ Pattern     â”‚  â”‚ Risk        â”‚  â”‚ NBA       â”‚  â”‚  â”‚
â”‚   â”‚  â”‚ Engine      â”‚  â”‚ Learning    â”‚  â”‚ Scoring     â”‚  â”‚ Engine    â”‚  â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                    â”‚                                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         DATA LAYER                                   â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚   â”‚  â”‚ PostgreSQL  â”‚  â”‚ EON Memory  â”‚  â”‚ Redis       â”‚  â”‚ ClickHouseâ”‚  â”‚  â”‚
â”‚   â”‚  â”‚ + pgvector  â”‚  â”‚ (Knowledge) â”‚  â”‚ (Cache)     â”‚  â”‚ (Analyticsâ”‚  â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                            â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      ANKR CORE SERVICES                              â”‚  â”‚
â”‚   â”‚  AI Proxy (4444) â”‚ Complymitra (4015) â”‚ EON (4005) â”‚ Gateway        â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           DATA FLOW ARCHITECTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. DATA INGESTION (Into Swayam)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Account Aggregator]â”€â”€â”€â”€â”€â”€â”
   (Setu, Finvu, OneMoney)   â”‚
                             â”‚
   [Insurance Repository]â”€â”€â”€â”€â”¼â”€â”€â”€â”€â–º[Swayam App]â”€â”€â”€â”€â–º[Local Processing]
   (IRDAI IIB)               â”‚         â”‚                   â”‚
                             â”‚         â”‚                   â”‚
   [Credit Bureaus]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚                   â”‚
   (CIBIL, Experian)         â”‚         â–¼                   â–¼
                             â”‚    [User sees]         [Edge ML]
   [Manual Entry]â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    consolidated        categorizes
   (User adds accounts)           dashboard           transactions


2. BEHAVIORAL CAPTURE (On-Device)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                    ON-DEVICE PROCESSING                         â”‚
   â”‚                                                                 â”‚
   â”‚   Raw Data                 Processing              Output       â”‚
   â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€       â”‚
   â”‚                                                                 â”‚
   â”‚   Transactions â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Categorize â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Patterns     â”‚
   â”‚   (from AA)                ML on-device            {groceries:  â”‚
   â”‚                                                     30%, etc}   â”‚
   â”‚                                                                 â”‚
   â”‚   App Usage â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Session â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Engagement   â”‚
   â”‚   (screens, time)          Aggregation            Score        â”‚
   â”‚                                                                 â”‚
   â”‚   Conversations â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Intent â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Topics       â”‚
   â”‚   (with Swayam)            Extraction             + Sentiment  â”‚
   â”‚                            (local LLM)                         â”‚
   â”‚                                                                 â”‚
   â”‚   Location â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Geofence â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º Context      â”‚
   â”‚   (if permitted)           (home/work/travel)     (not coords) â”‚
   â”‚                                                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


3. CONSENT-GATED SYNC (To Backend)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   User Controls What Gets Shared:

   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚                     CONSENT DASHBOARD                           â”‚
   â”‚                                                                 â”‚
   â”‚   â˜‘ Share spending patterns (anonymized)                       â”‚
   â”‚     â†’ Helps us give you better insights                        â”‚
   â”‚                                                                 â”‚
   â”‚   â˜‘ Allow banks to send personalized offers                    â”‚
   â”‚     â†’ You may get better rates on loans                        â”‚
   â”‚                                                                 â”‚
   â”‚   â˜ Share with specific bank: HDFC                             â”‚
   â”‚   â˜ Share with specific bank: ICICI                            â”‚
   â”‚   â˜‘ Share with specific insurer: LIC                           â”‚
   â”‚                                                                 â”‚
   â”‚   â˜ Participate in market research (â‚¹50 reward)                â”‚
   â”‚                                                                 â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


4. INTELLIGENCE PROCESSING (Backend)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Anonymized Patterns]
          â”‚
          â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Episode Engine  â”‚â”€â”€â”€â”€â”€â”€â–º state: "age 30, income 10L, spending up 20%"
   â”‚                 â”‚        action: "inquired about personal loan"
   â”‚                 â”‚        outcome: "showed interest, didn't apply"
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Pattern Match   â”‚â”€â”€â”€â”€â”€â”€â–º Similar users who behaved this way:
   â”‚ (pgvector)      â”‚        - 60% took loan within 30 days
   â”‚                 â”‚        - 25% took loan from competitor
   â”‚                 â”‚        - 15% didn't take loan
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Insight Gen     â”‚â”€â”€â”€â”€â”€â”€â–º "High intent loan seeker"
   â”‚ (AI Proxy)      â”‚        "Price sensitive - needs good rate"
   â”‚                 â”‚        "Prefers digital process"
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚ Distribution    â”‚â”€â”€â”€â”€â”€â”€â–º To subscribed banks (if user consented)
   â”‚                 â”‚        Lead: {segment: "loan_ready", score: 85}
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


5. FEEDBACK LOOP (Back to User)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

   [Bank makes offer via ankrBFC]
          â”‚
          â–¼
   [User sees in Swayam app]
          â”‚
          â–¼
   [User accepts/rejects]
          â”‚
          â–¼
   [Episode recorded: "Bank X offered 10.5%, user rejected"]
          â”‚
          â–¼
   [Pattern updated: "This user needs rate < 10%"]
          â”‚
          â–¼
   [Better offers next time]
```

---

## 3. Swayam Consumer App

### 3.1 Core Features

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          SWAYAM APP FEATURES                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    HOME - FINANCIAL DASHBOARD                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   "Namaste Rahul! Aaj aapki financial health 78/100 hai"            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚   â”‚
â”‚  â”‚   â”‚ Net Worth    â”‚  â”‚ This Month   â”‚  â”‚ Credit Score â”‚              â”‚   â”‚
â”‚  â”‚   â”‚ â‚¹12.5L       â”‚  â”‚ Spent â‚¹45K   â”‚  â”‚ 742 (+5)     â”‚              â”‚   â”‚
â”‚  â”‚   â”‚ â†‘ 8% YoY     â”‚  â”‚ Budget: â‚¹50K â”‚  â”‚ Good         â”‚              â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   LINKED ACCOUNTS (via Account Aggregator)                          â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ¦ HDFC Savings â€¢â€¢â€¢â€¢1234      â‚¹1,24,500                     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ¦ SBI Savings â€¢â€¢â€¢â€¢5678       â‚¹45,200                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ¦ ICICI Credit â€¢â€¢â€¢â€¢9012      â‚¹12,400 due                   â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ“ˆ Zerodha Demat              â‚¹3,45,000                     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ  HDFC Home Loan             â‚¹32L remaining                â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ + Add more accounts                                         â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   INSURANCE POLICIES (via IIB)                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸš— HDFC Ergo Motor    â‚¹8.5L cover    Expires: Mar 2024     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â¤ï¸ Star Health        â‚¹5L cover      Expires: Jun 2024     â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ›¡ï¸ LIC Term           â‚¹1Cr cover     Expires: 2045         â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ âš ï¸ Gap: No personal accident cover - Get quote             â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    SWAYAM AI ASSISTANT                               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   ğŸ¤ "Swayam, mera credit score kyun gira?"                         â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   ğŸ¤– "Rahul ji, aapka score 5 points gira kyunki:                   â”‚   â”‚
â”‚  â”‚       1. Credit card utilization 45% ho gaya (30% se neeche rakho)  â”‚   â”‚
â”‚  â”‚       2. Ek EMI 3 din late thi                                      â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚       Fix karne ke liye: â‚¹15,000 extra payment kar do credit card   â”‚   â”‚
â”‚  â”‚       pe. 2 mahine mein score wapas aa jayega."                     â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   Suggested: [Pay â‚¹15K now] [Set reminder] [Explain more]           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚   â”‚
â”‚  â”‚   ğŸ’¡ PROACTIVE INSIGHTS                                             â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â€¢ "Aapka LIC premium â‚¹12,400 kal due hai"                        â”‚   â”‚
â”‚  â”‚   â€¢ "Better home loan rate available: 8.5% vs your 9.2%"            â”‚   â”‚
â”‚  â”‚   â€¢ "You've saved â‚¹8,500 this month - invest in SIP?"               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    GAMIFICATION - MITRA POINTS                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   Level: Financial Ninja ğŸ¥·  â”‚  Points: 12,500  â”‚  Streak: 45 days  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   TODAY'S MISSIONS                                                  â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ â˜‘ Check your accounts (done)              +10 pts           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â˜ Log today's expenses                    +20 pts           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â˜ Complete financial quiz                 +50 pts           â”‚   â”‚   â”‚
â”‚  â”‚   â”‚ â˜ Refer a friend                          +500 pts          â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   REDEEM POINTS                                                     â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚  â”‚   â”‚ â‚¹100 off   â”‚ â”‚ Free       â”‚ â”‚ Premium    â”‚ â”‚ Cashback   â”‚      â”‚   â”‚
â”‚  â”‚   â”‚ insurance  â”‚ â”‚ credit     â”‚ â”‚ unlock     â”‚ â”‚ â‚¹500       â”‚      â”‚   â”‚
â”‚  â”‚   â”‚ 2000 pts   â”‚ â”‚ report     â”‚ â”‚ 5000 pts   â”‚ â”‚ 10000 pts  â”‚      â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ 1000 pts   â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                    OFFERS (Consent-based)                            â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   "Based on your profile, these offers are available:"              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ¦ HDFC Personal Loan                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    Rate: 10.5% â”‚ Amount: Up to â‚¹10L â”‚ Tenure: 5 years      â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    [Apply] [Not interested] [Negotiate rate]                â”‚   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ¦ ICICI Credit Card Upgrade                                â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    Limit: â‚¹3L â†’ â‚¹5L â”‚ No fee for 1 year                    â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    [Accept] [Decline]                                       â”‚   â”‚   â”‚
â”‚  â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚   â”‚
â”‚  â”‚   â”‚ ğŸ›¡ï¸ Star Health Super Saver                                 â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    Cover: â‚¹10L â”‚ Premium: â‚¹8,500/yr â”‚ Family floater       â”‚   â”‚   â”‚
â”‚  â”‚   â”‚    [Get quote] [Compare] [Not now]                          â”‚   â”‚   â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚   â„¹ï¸ You control who can send offers: [Manage preferences]         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.2 On-Device Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     SWAYAM ON-DEVICE ARCHITECTURE                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                         UI LAYER (React Native)                      â”‚  â”‚
â”‚   â”‚  Home â”‚ Accounts â”‚ Insurance â”‚ Swayam AI â”‚ Offers â”‚ Rewards â”‚ More  â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                      STATE MANAGEMENT (Zustand)                      â”‚  â”‚
â”‚   â”‚  User â”‚ Accounts â”‚ Transactions â”‚ Policies â”‚ Gamification â”‚ Sync    â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    ON-DEVICE SERVICES                                â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚   â”‚  â”‚ Swayam Local    â”‚  â”‚ Transaction     â”‚  â”‚ Gamification    â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ LLM Engine      â”‚  â”‚ Categorizer     â”‚  â”‚ Engine          â”‚      â”‚  â”‚
â”‚   â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Model: Phi-3    â”‚  â”‚ Model: Custom   â”‚  â”‚ Rules Engine    â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Size: ~1.5GB    â”‚  â”‚ TFLite (5MB)    â”‚  â”‚ Points/Badges   â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Languages: 22+  â”‚  â”‚ 50+ categories  â”‚  â”‚ Challenges      â”‚      â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚   â”‚  â”‚ Behavioral      â”‚  â”‚ Notification    â”‚  â”‚ Sync Manager    â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Tracker         â”‚  â”‚ Scheduler       â”‚  â”‚                 â”‚      â”‚  â”‚
â”‚   â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚ Consent-gated   â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ App events      â”‚  â”‚ Reminders       â”‚  â”‚ Delta sync      â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Session data    â”‚  â”‚ Insights        â”‚  â”‚ Conflict res.   â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Patterns        â”‚  â”‚ Offers          â”‚  â”‚ Offline-first   â”‚      â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    SECURE STORAGE LAYER                              â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚  â”‚
â”‚   â”‚  â”‚ SQLite          â”‚  â”‚ Secure          â”‚  â”‚ Model           â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ (Encrypted)     â”‚  â”‚ Keychain        â”‚  â”‚ Storage         â”‚      â”‚  â”‚
â”‚   â”‚  â”‚                 â”‚  â”‚                 â”‚  â”‚                 â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Transactions    â”‚  â”‚ Tokens          â”‚  â”‚ LLM weights     â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Patterns        â”‚  â”‚ Keys            â”‚  â”‚ ML models       â”‚      â”‚  â”‚
â”‚   â”‚  â”‚ Preferences     â”‚  â”‚ Consent state   â”‚  â”‚ Embeddings      â”‚      â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                      â”‚                                      â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                    NATIVE MODULES                                    â”‚  â”‚
â”‚   â”‚                                                                      â”‚  â”‚
â”‚   â”‚  Biometric Auth â”‚ Camera (KYC) â”‚ Location â”‚ SMS Read â”‚ Notifications â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 3.3 Swayam Local LLM Specification

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SWAYAM LOCAL LLM SPECIFICATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MODEL SELECTION                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                             â”‚
â”‚  Primary: Microsoft Phi-3-mini (3.8B params, quantized to 4-bit)           â”‚
â”‚  Fallback: Google Gemma-2B (for older devices)                             â”‚
â”‚  Size: 1.5GB (Phi-3) / 800MB (Gemma-2B)                                    â”‚
â”‚                                                                             â”‚
â”‚  LANGUAGE SUPPORT                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Tier 1 (Native):    Hindi, English, Tamil, Telugu, Bengali          â”‚   â”‚
â”‚  â”‚ Tier 2 (Good):      Marathi, Gujarati, Kannada, Malayalam, Punjabi  â”‚   â”‚
â”‚  â”‚ Tier 3 (Basic):     Odia, Assamese, Urdu, and 10+ more              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Voice: Speech-to-text + Text-to-speech for all Tier 1 & 2           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  CAPABILITIES (On-Device)                                                   â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                   â”‚
â”‚                                                                             â”‚
â”‚  âœ… CAN DO (Offline)                    âŒ CANNOT DO (Privacy)              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚
â”‚  â€¢ Answer financial questions           â€¢ Access raw transaction data       â”‚
â”‚  â€¢ Explain terms in local language      â€¢ Make payments/transactions        â”‚
â”‚  â€¢ Calculate EMI, interest, tax         â€¢ See other users' data             â”‚
â”‚  â€¢ Provide budgeting advice             â€¢ Access backend directly           â”‚
â”‚  â€¢ Guide through app features           â€¢ Store conversation history        â”‚
â”‚  â€¢ Set reminders, alerts                  (beyond current session)          â”‚
â”‚  â€¢ Gamification coaching                                                    â”‚
â”‚  â€¢ Insurance explainer                                                      â”‚
â”‚                                                                             â”‚
â”‚  INFERENCE PERFORMANCE                                                      â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Device Tier        â”‚ First Token â”‚ Tokens/sec â”‚ Experience          â”‚   â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚  â”‚ Flagship (S24, 15) â”‚ <500ms      â”‚ 15-20      â”‚ Excellent           â”‚   â”‚
â”‚  â”‚ Mid-range (A54)    â”‚ <1s         â”‚ 8-12       â”‚ Good                â”‚   â”‚
â”‚  â”‚ Budget (Redmi 10)  â”‚ <2s         â”‚ 4-6        â”‚ Acceptable          â”‚   â”‚
â”‚  â”‚ Very old           â”‚ N/A         â”‚ N/A        â”‚ Cloud fallback      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  KNOWLEDGE BASE (Embedded)                                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                  â”‚
â”‚                                                                             â”‚
â”‚  â€¢ Financial literacy content (RBI guidelines)                             â”‚
â”‚  â€¢ Insurance terminology & concepts                                         â”‚
â”‚  â€¢ Tax rules (basic 80C, 80D, etc.)                                        â”‚
â”‚  â€¢ Banking product explanations                                             â”‚
â”‚  â€¢ Fraud awareness content                                                  â”‚
â”‚  â€¢ Regional financial schemes (PM-KISAN, etc.)                             â”‚
â”‚                                                                             â”‚
â”‚  Size: ~200MB additional (compressed)                                       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. ankrBFC B2B Platform

### 4.1 Bank/Insurer Dashboard

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ankrBFC BANK DASHBOARD                               â”‚
â”‚                        HDFC Bank - Admin Portal                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ OVERVIEW                                            [Jan 2026]       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ Matched      â”‚ â”‚ Active       â”‚ â”‚ Leads This   â”‚ â”‚ Conversion â”‚  â”‚   â”‚
â”‚  â”‚  â”‚ Customers    â”‚ â”‚ Insights     â”‚ â”‚ Month        â”‚ â”‚ Rate       â”‚  â”‚   â”‚
â”‚  â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚ â”‚            â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   45,234     â”‚ â”‚   12,456     â”‚ â”‚    892       â”‚ â”‚   4.2%     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚   â†‘ 12%      â”‚ â”‚   â†‘ 8%       â”‚ â”‚   â†‘ 23%      â”‚ â”‚   â†‘ 0.5%   â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ BEHAVIORAL SEGMENTS (Your Customers on Swayam)                       â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Segment                  â”‚ Count â”‚ Key Insight           â”‚ Action   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  ğŸ”´ High Churn Risk       â”‚ 1,234 â”‚ Reduced engagement    â”‚ [Alert]  â”‚   â”‚
â”‚  â”‚  ğŸŸ¡ Loan Ready            â”‚ 3,456 â”‚ Searching competitors â”‚ [Offer]  â”‚   â”‚
â”‚  â”‚  ğŸŸ¢ Cross-sell Ready      â”‚ 5,678 â”‚ Life event detected   â”‚ [Target] â”‚   â”‚
â”‚  â”‚  ğŸ”µ Premium Upgrade       â”‚ 2,345 â”‚ Income increased      â”‚ [Upsell] â”‚   â”‚
â”‚  â”‚  âšª Dormant Reactivation  â”‚   890 â”‚ No activity 90+ days  â”‚ [Engage] â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ LEAD QUEUE (Users who opted-in to receive HDFC offers)               â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Score â”‚ Segment        â”‚ Product Interest â”‚ Last Activity â”‚ Action  â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚   92   â”‚ Loan Ready     â”‚ Personal Loan    â”‚ 2 hours ago   â”‚ [Call]  â”‚   â”‚
â”‚  â”‚   88   â”‚ Premium        â”‚ Credit Card      â”‚ 1 day ago     â”‚ [Email] â”‚   â”‚
â”‚  â”‚   85   â”‚ Cross-sell     â”‚ Insurance        â”‚ 3 days ago    â”‚ [Push]  â”‚   â”‚
â”‚  â”‚   82   â”‚ Loan Ready     â”‚ Home Loan        â”‚ 1 week ago    â”‚ [SMS]   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  [Download all leads] [Auto-assign to sales team] [Set rules]       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ CHURN ALERTS (Your customers showing risk signals)                   â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Customer ID â”‚ Risk â”‚ Signals                          â”‚ Suggested   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  CUST-78432  â”‚ HIGH â”‚ Browsing competitor rates,       â”‚ Offer rate  â”‚   â”‚
â”‚  â”‚              â”‚      â”‚ reduced HDFC app usage           â”‚ match       â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  CUST-23456  â”‚ MED  â”‚ Missed payment, sentiment drop   â”‚ Payment     â”‚   â”‚
â”‚  â”‚              â”‚      â”‚ in support chat                  â”‚ plan        â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚   â”‚
â”‚  â”‚  CUST-89012  â”‚ MED  â”‚ Life event: job change,          â”‚ Retention   â”‚   â”‚
â”‚  â”‚              â”‚      â”‚ income uncertainty               â”‚ call        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ MARKET INTELLIGENCE (Anonymized, aggregated)                         â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  Your Market Share          â”‚  Competitor Movement                   â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚   â”‚
â”‚  â”‚  Personal Loan:   23%       â”‚  ICICI gaining in 25-35 age group     â”‚   â”‚
â”‚  â”‚  Credit Card:     18%       â”‚  SBI aggressive on home loan rates    â”‚   â”‚
â”‚  â”‚  Savings A/c:     31%       â”‚  Kotak digital-first approach working â”‚   â”‚
â”‚  â”‚                             â”‚                                        â”‚   â”‚
â”‚  â”‚  [Full report] [Trend analysis] [Set alerts]                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  NAVIGATION: [Overview] [Segments] [Leads] [Churn] [Intelligence] [API]    â”‚
â”‚              [Settings] [Billing] [Support]                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 B2B API Specification

```yaml
# ankrBFC B2B API Specification
# Version: 1.0.0
# Base URL: https://api.ankrbfc.com/v1

authentication:
  type: OAuth2 + API Key
  scopes:
    - insights:read      # Read behavioral insights
    - leads:read         # Access opted-in leads
    - leads:write        # Update lead status
    - churn:read         # Access churn alerts
    - offers:write       # Send offers to users
    - analytics:read     # Access market intelligence

endpoints:
  # ==================== INSIGHTS ====================

  GET /insights/segments:
    description: Get behavioral segments for your customers
    parameters:
      - min_score: integer (filter by minimum insight score)
      - segment_type: enum [churn_risk, loan_ready, cross_sell, dormant]
      - limit: integer
    response:
      segments:
        - segment_id: string
          segment_name: string
          customer_count: integer
          key_behaviors: string[]
          recommended_action: string
          avg_conversion_rate: float

  GET /insights/customer/{customer_id}:
    description: Get insights for specific customer (if they consented)
    parameters:
      - customer_id: string (your internal customer ID)
    response:
      matched: boolean
      consent_status: enum [full, partial, none]
      insights:
        churn_risk: float (0-1)
        next_best_action: string
        life_events: string[]
        product_affinity: object
        engagement_trend: enum [up, stable, down]
        competitor_activity: boolean

  # ==================== LEADS ====================

  GET /leads:
    description: Get users who opted-in to receive your offers
    parameters:
      - product_type: enum [loan, card, insurance, deposit]
      - min_score: integer
      - since: datetime
      - limit: integer
    response:
      leads:
        - lead_id: string
          score: integer (0-100)
          product_interest: string
          key_signals: string[]
          consent_scope: string[]
          contact_preference: enum [call, email, push, sms]
          best_time_to_contact: string

  POST /leads/{lead_id}/status:
    description: Update lead status (for attribution)
    body:
      status: enum [contacted, converted, rejected, not_interested]
      product_sold: string (optional)
      notes: string (optional)

  # ==================== OFFERS ====================

  POST /offers:
    description: Send personalized offer to user
    body:
      target:
        segment_id: string (optional, for bulk)
        lead_ids: string[] (optional, for specific users)
      offer:
        product_type: string
        headline: string (max 50 chars)
        description: string (max 200 chars)
        terms:
          interest_rate: float (optional)
          amount: integer (optional)
          tenure: integer (optional)
        cta_url: string
        expires_at: datetime
    response:
      offer_id: string
      delivered_count: integer
      estimated_reach: integer

  GET /offers/{offer_id}/performance:
    description: Get offer performance metrics
    response:
      impressions: integer
      clicks: integer
      conversions: integer
      ctr: float
      conversion_rate: float

  # ==================== CHURN ====================

  GET /churn/alerts:
    description: Get customers showing churn risk signals
    parameters:
      - min_risk: float (0-1)
      - product_type: string (optional)
    response:
      alerts:
        - customer_id: string
          risk_score: float
          risk_factors: string[]
          days_to_likely_churn: integer
          recommended_intervention: string
          competitor_mentioned: boolean

  # ==================== ANALYTICS ====================

  GET /analytics/market-share:
    description: Your market share by product category
    parameters:
      - product_type: string
      - region: string (optional)
      - age_group: string (optional)
    response:
      your_share: float
      trend: enum [up, stable, down]
      top_competitors:
        - name: string
          share: float
          trend: enum [up, stable, down]

  GET /analytics/trends:
    description: Market trends and patterns
    response:
      trends:
        - trend_name: string
          description: string
          relevance_score: float
          recommended_action: string

webhooks:
  - event: lead.high_intent
    description: Triggered when high-intent lead detected
    payload:
      lead_id: string
      score: integer
      product_interest: string

  - event: churn.risk_elevated
    description: Triggered when customer churn risk increases
    payload:
      customer_id: string
      risk_score: float
      risk_factors: string[]

  - event: offer.converted
    description: Triggered when user accepts an offer
    payload:
      offer_id: string
      lead_id: string
      product_type: string

rate_limits:
  standard: 1000 requests/hour
  premium: 10000 requests/hour
  enterprise: unlimited (fair use)
```

---

## 5. Data Architecture

### 5.1 Database Schema

```sql
-- ============================================================================
-- CORE TABLES
-- ============================================================================

-- Users (Swayam app users)
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    phone VARCHAR(15) UNIQUE NOT NULL,  -- Primary identifier
    phone_hash VARCHAR(64) NOT NULL,    -- For privacy-preserving matching

    -- Profile (user-provided)
    name VARCHAR(100),
    email VARCHAR(255),
    date_of_birth DATE,
    gender VARCHAR(20),

    -- Derived attributes
    estimated_income_bracket VARCHAR(20),  -- derived from transactions
    location_city VARCHAR(100),            -- derived, not precise

    -- App state
    app_version VARCHAR(20),
    device_tier VARCHAR(20),  -- flagship, mid, budget
    language_preference VARCHAR(10) DEFAULT 'en',

    -- Consent state (JSON for flexibility)
    consent_state JSONB DEFAULT '{}',

    -- Gamification
    total_points INTEGER DEFAULT 0,
    current_level INTEGER DEFAULT 1,
    streak_days INTEGER DEFAULT 0,

    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- Linked accounts (from Account Aggregator)
CREATE TABLE linked_accounts (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),

    -- Account info
    fi_type VARCHAR(50),          -- BANK, INSURANCE, SECURITIES, etc.
    fi_name VARCHAR(100),         -- HDFC, ICICI, etc.
    account_type VARCHAR(50),     -- SAVINGS, CURRENT, CREDIT_CARD, etc.
    account_number_masked VARCHAR(20),  -- ****1234

    -- AA consent
    aa_consent_id VARCHAR(100),
    consent_start TIMESTAMP,
    consent_end TIMESTAMP,

    -- Metadata
    is_primary BOOLEAN DEFAULT FALSE,
    last_synced_at TIMESTAMP,

    created_at TIMESTAMP DEFAULT NOW()
);

-- Episodes (behavioral events)
CREATE TABLE episodes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),

    -- Episode content
    state TEXT NOT NULL,         -- Context: "age 30, income 10L, 3 accounts"
    action TEXT NOT NULL,        -- What happened: "browsed home loans"
    outcome TEXT,                -- Result: "compared 3 banks"

    -- Classification
    category VARCHAR(50),        -- FINANCIAL_PLANNING, INSURANCE, CREDIT, etc.
    intent VARCHAR(50),          -- RESEARCH, COMPARE, APPLY, SUPPORT
    sentiment FLOAT,             -- -1 to 1

    -- Source
    source VARCHAR(50),          -- SWAYAM_CHAT, APP_BEHAVIOR, TRANSACTION, EXTERNAL
    source_detail JSONB,

    -- Vector embedding for similarity search
    embedding vector(1536),

    -- Privacy
    is_anonymized BOOLEAN DEFAULT FALSE,
    can_share_with_providers BOOLEAN DEFAULT FALSE,

    created_at TIMESTAMP DEFAULT NOW(),

    -- Indexes
    INDEX idx_episodes_user (user_id),
    INDEX idx_episodes_category (category),
    INDEX idx_episodes_created (created_at)
);

-- Create vector index for similarity search
CREATE INDEX idx_episodes_embedding ON episodes
USING ivfflat (embedding vector_cosine_ops) WITH (lists = 100);

-- Behavioral patterns (aggregated, anonymized)
CREATE TABLE behavioral_patterns (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

    -- Pattern definition
    pattern_name VARCHAR(100),
    pattern_description TEXT,

    -- Matching criteria
    criteria JSONB,  -- {"age_range": [25, 35], "income_bracket": "10L-20L", ...}

    -- Statistics
    user_count INTEGER,
    success_rate FLOAT,
    avg_conversion_days INTEGER,

    -- Common outcomes
    typical_outcomes JSONB,  -- [{"outcome": "took_loan", "probability": 0.6}, ...]

    updated_at TIMESTAMP DEFAULT NOW()
);

-- ============================================================================
-- B2B TABLES
-- ============================================================================

-- Tenants (Banks, Insurance companies)
CREATE TABLE tenants (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),

    -- Basic info
    name VARCHAR(100) NOT NULL,
    type VARCHAR(50),  -- BANK, INSURER, NBFC

    -- API access
    api_key_hash VARCHAR(64),
    subscription_tier VARCHAR(20),  -- BASIC, PREMIUM, ENTERPRISE

    -- Matching
    customer_id_field VARCHAR(50),  -- How they identify customers

    -- Billing
    billing_email VARCHAR(255),
    billing_address JSONB,

    created_at TIMESTAMP DEFAULT NOW(),
    is_active BOOLEAN DEFAULT TRUE
);

-- Tenant customer mapping (their customer ID â†’ our user ID)
CREATE TABLE tenant_customer_map (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID REFERENCES tenants(id),
    user_id UUID REFERENCES users(id),

    -- Their customer identifier
    external_customer_id VARCHAR(100),

    -- Consent for this specific tenant
    consent_level VARCHAR(20),  -- FULL, PARTIAL, INSIGHTS_ONLY, NONE
    consent_updated_at TIMESTAMP,

    -- Matching confidence
    match_confidence FLOAT,
    match_method VARCHAR(50),  -- PHONE, EMAIL, PAN, AA_LINK

    created_at TIMESTAMP DEFAULT NOW(),

    UNIQUE(tenant_id, external_customer_id)
);

-- Insights generated for tenants
CREATE TABLE tenant_insights (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID REFERENCES tenants(id),
    user_id UUID REFERENCES users(id),

    -- Insight content
    insight_type VARCHAR(50),  -- CHURN_RISK, CROSS_SELL, LOAN_READY, etc.
    insight_score FLOAT,
    insight_detail JSONB,

    -- Validity
    generated_at TIMESTAMP DEFAULT NOW(),
    valid_until TIMESTAMP,

    -- Delivery
    delivered_at TIMESTAMP,
    delivery_channel VARCHAR(50)
);

-- Leads (users who opted to receive offers)
CREATE TABLE leads (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    tenant_id UUID REFERENCES tenants(id),

    -- Lead info
    product_interest VARCHAR(50),
    intent_score INTEGER,

    -- Signals
    signals JSONB,  -- What triggered this lead

    -- Contact preferences
    preferred_channel VARCHAR(20),
    preferred_time VARCHAR(50),

    -- Status
    status VARCHAR(20) DEFAULT 'NEW',  -- NEW, CONTACTED, CONVERTED, REJECTED
    status_updated_at TIMESTAMP,

    -- Attribution
    converted_product VARCHAR(100),
    converted_at TIMESTAMP,

    created_at TIMESTAMP DEFAULT NOW()
);

-- Offers sent by tenants
CREATE TABLE offers (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    tenant_id UUID REFERENCES tenants(id),

    -- Offer content
    product_type VARCHAR(50),
    headline VARCHAR(100),
    description TEXT,
    terms JSONB,
    cta_url VARCHAR(500),

    -- Targeting
    target_segment VARCHAR(100),
    target_user_ids UUID[],

    -- Performance
    impressions INTEGER DEFAULT 0,
    clicks INTEGER DEFAULT 0,
    conversions INTEGER DEFAULT 0,

    -- Validity
    starts_at TIMESTAMP DEFAULT NOW(),
    expires_at TIMESTAMP,

    created_at TIMESTAMP DEFAULT NOW()
);

-- ============================================================================
-- GAMIFICATION TABLES
-- ============================================================================

CREATE TABLE badges (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100),
    description TEXT,
    icon VARCHAR(100),
    points_required INTEGER,
    criteria JSONB
);

CREATE TABLE user_badges (
    user_id UUID REFERENCES users(id),
    badge_id UUID REFERENCES badges(id),
    earned_at TIMESTAMP DEFAULT NOW(),
    PRIMARY KEY (user_id, badge_id)
);

CREATE TABLE challenges (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    title VARCHAR(100),
    description TEXT,
    reward_points INTEGER,
    criteria JSONB,
    starts_at TIMESTAMP,
    ends_at TIMESTAMP,
    is_active BOOLEAN DEFAULT TRUE
);

CREATE TABLE user_challenges (
    user_id UUID REFERENCES users(id),
    challenge_id UUID REFERENCES challenges(id),
    progress FLOAT DEFAULT 0,
    completed_at TIMESTAMP,
    PRIMARY KEY (user_id, challenge_id)
);
```

### 5.2 Data Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          DATA FLOW ARCHITECTURE                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                              INGESTION
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Account       â”‚    â”‚ Insurance     â”‚    â”‚ On-Device     â”‚    â”‚ User       â”‚
â”‚ Aggregator    â”‚    â”‚ Repository    â”‚    â”‚ Behavior      â”‚    â”‚ Actions    â”‚
â”‚ (Setu/Finvu)  â”‚    â”‚ (IRDAI IIB)   â”‚    â”‚ (Swayam SDK)  â”‚    â”‚ (App)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
        â”‚                    â”‚                    â”‚                  â”‚
        â”‚ FI Data            â”‚ Policy Data        â”‚ Patterns         â”‚ Events
        â”‚                    â”‚                    â”‚                  â”‚
        â–¼                    â–¼                    â–¼                  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           INGESTION LAYER                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚ AA Adapter  â”‚  â”‚ IIB Adapter â”‚  â”‚ Mobile Sync â”‚  â”‚ Event       â”‚        â”‚
â”‚  â”‚             â”‚  â”‚             â”‚  â”‚ Service     â”‚  â”‚ Processor   â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚ Episode Builder â”‚                               â”‚
â”‚                          â”‚ state â†’ action  â”‚                               â”‚
â”‚                          â”‚ â†’ outcome       â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PROCESSING LAYER                                  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                         PostgreSQL + pgvector                        â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  users â”‚ episodes â”‚ patterns â”‚ linked_accounts â”‚ tenant_insights    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                    â”‚                                        â”‚
â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚         â”‚                          â”‚                          â”‚            â”‚
â”‚         â–¼                          â–¼                          â–¼            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Embedding   â”‚           â”‚ Pattern     â”‚           â”‚ Insight     â”‚       â”‚
â”‚  â”‚ Generator   â”‚           â”‚ Matcher     â”‚           â”‚ Generator   â”‚       â”‚
â”‚  â”‚ (AI Proxy)  â”‚           â”‚ (pgvector)  â”‚           â”‚ (AI Proxy)  â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚                          â”‚   EON Memory    â”‚                               â”‚
â”‚                          â”‚ Knowledge Graph â”‚                               â”‚
â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                                    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           OUTPUT LAYER                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚ Swayam App      â”‚   â”‚ ankrBFC B2B     â”‚   â”‚ Analytics       â”‚           â”‚
â”‚  â”‚ (Consumer)      â”‚   â”‚ (Banks)         â”‚   â”‚ (Internal)      â”‚           â”‚
â”‚  â”‚                 â”‚   â”‚                 â”‚   â”‚                 â”‚           â”‚
â”‚  â”‚ â€¢ Insights      â”‚   â”‚ â€¢ Segments      â”‚   â”‚ â€¢ Dashboards    â”‚           â”‚
â”‚  â”‚ â€¢ Offers        â”‚   â”‚ â€¢ Leads         â”‚   â”‚ â€¢ Reports       â”‚           â”‚
â”‚  â”‚ â€¢ Gamification  â”‚   â”‚ â€¢ Churn alerts  â”‚   â”‚ â€¢ ML training   â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 6. Privacy & Consent Framework

### 6.1 Privacy Principles

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         PRIVACY BY DESIGN                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  PRINCIPLE 1: ON-DEVICE FIRST                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚  â€¢ Raw transaction data stays on device                                    â”‚
â”‚  â€¢ Conversations with Swayam stay on device                                â”‚
â”‚  â€¢ Only aggregated patterns are synced (with consent)                      â”‚
â”‚  â€¢ User can delete local data anytime                                      â”‚
â”‚                                                                             â”‚
â”‚  PRINCIPLE 2: EXPLICIT CONSENT                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                            â”‚
â”‚  â€¢ Granular consent for each data type                                     â”‚
â”‚  â€¢ Consent for each provider (bank/insurer)                                â”‚
â”‚  â€¢ Easy revocation anytime                                                 â”‚
â”‚  â€¢ Clear explanation of what's shared and why                              â”‚
â”‚                                                                             â”‚
â”‚  PRINCIPLE 3: ANONYMIZATION BY DEFAULT                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                     â”‚
â”‚  â€¢ User IDs are hashed before sharing with tenants                         â”‚
â”‚  â€¢ Aggregate insights, not individual data points                          â”‚
â”‚  â€¢ K-anonymity for small segments (min 100 users)                          â”‚
â”‚  â€¢ No PII in behavioral patterns                                           â”‚
â”‚                                                                             â”‚
â”‚  PRINCIPLE 4: TRANSPARENCY                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  â€¢ User can see exactly what was shared                                    â”‚
â”‚  â€¢ User can see which providers accessed their data                        â”‚
â”‚  â€¢ Clear audit trail                                                       â”‚
â”‚  â€¢ Regular privacy reports                                                 â”‚
â”‚                                                                             â”‚
â”‚  PRINCIPLE 5: USER BENEFIT                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚  â€¢ Data sharing must benefit the user (better offers, etc.)                â”‚
â”‚  â€¢ User gets value first (free app, insights, gamification)                â”‚
â”‚  â€¢ Rewards for opting into data sharing                                    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6.2 Consent Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        CONSENT MANAGEMENT                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  CONSENT LEVELS                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                             â”‚
â”‚  Level 0: BASIC (Required for app to work)                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Store account info locally                                        â”‚   â”‚
â”‚  â”‚ â€¢ Process transactions on-device                                    â”‚   â”‚
â”‚  â”‚ â€¢ Send notifications                                                â”‚   â”‚
â”‚  â”‚ â€¢ Basic analytics (anonymous, aggregated)                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Level 1: ENHANCED (For personalization)                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Sync spending patterns to cloud (anonymized)                      â”‚   â”‚
â”‚  â”‚ â€¢ Enable cross-device sync                                          â”‚   â”‚
â”‚  â”‚ â€¢ Personalized insights from AI                                     â”‚   â”‚
â”‚  â”‚ â€¢ Gamification progress sync                                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Level 2: OFFERS (For receiving offers)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Share insights with selected providers                            â”‚   â”‚
â”‚  â”‚ â€¢ Receive personalized offers                                       â”‚   â”‚
â”‚  â”‚ â€¢ Per-provider consent (HDFC: yes, ICICI: no)                       â”‚   â”‚
â”‚  â”‚ â€¢ Contact preferences (email, push, call)                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  Level 3: RESEARCH (For market research participation)                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Contribute to anonymized market research                          â”‚   â”‚
â”‚  â”‚ â€¢ Participate in surveys (rewarded)                                 â”‚   â”‚
â”‚  â”‚ â€¢ Help improve financial products for everyone                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚                                                                             â”‚
â”‚  CONSENT UI FLOW                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                     PRIVACY SETTINGS                                â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  What we use your data for:                                         â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“Š Personalized Insights                              [ON]   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    We analyze your spending to give you tips                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Data: Spending categories, not individual transactions     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    [See what we collect]                                      â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ Personalized Offers                                [ON]   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Banks can send you relevant offers                         â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Data: Interest signals, not account balances               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Which providers can contact you:                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    [âœ“] HDFC Bank    [âœ“] ICICI Bank    [ ] SBI                â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    [âœ“] LIC          [ ] HDFC Life     [âœ“] Star Health        â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    [Manage all providers]                                     â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚ ğŸ“ˆ Market Research                                    [OFF]  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Help improve financial products for everyone               â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    Earn â‚¹50-200 per survey                                   â”‚  â”‚   â”‚
â”‚  â”‚  â”‚    [Learn more]                                               â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  [Download my data]  [Delete all data]  [Privacy policy]           â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. Tech Stack

### 7.1 Consumer App (Swayam)

| Layer | Technology | Rationale |
|-------|------------|-----------|
| **Framework** | React Native + Expo | Cross-platform, ANKR standard |
| **Navigation** | Expo Router | File-based routing |
| **State** | Zustand | Lightweight, ANKR standard |
| **Local DB** | SQLite (encrypted) | Offline-first storage |
| **Local LLM** | Phi-3 via react-native-executorch | On-device AI |
| **ML** | TensorFlow Lite | Transaction categorization |
| **Voice** | react-native-voice | Speech-to-text |
| **Auth** | Phone OTP + Biometric | Indian standard |
| **Analytics** | PostHog (self-hosted) | Privacy-respecting |
| **Notifications** | FCM + APNs | Push notifications |

### 7.2 Backend Platform

| Layer | Technology | Rationale |
|-------|------------|-----------|
| **API Framework** | Fastify + Mercurius | GraphQL-first, ANKR standard |
| **Database** | PostgreSQL 15 + pgvector | Vector search, ANKR standard |
| **ORM** | Prisma | Type-safe, ANKR standard |
| **Cache** | Redis | Session, rate limiting |
| **Queue** | BullMQ | Background jobs |
| **Search** | pgvector + EON | Semantic search |
| **AI/ML** | AI Proxy (4444) | Multi-provider LLM |
| **Knowledge** | EON Memory (4005) | Knowledge graph |
| **Compliance** | Complymitra (4015) | KYC, AML |
| **Analytics DB** | ClickHouse | Time-series analytics |
| **Auth** | Custom JWT + OAuth2 | B2B API auth |

### 7.3 Infrastructure

| Component | Technology | Rationale |
|-----------|------------|-----------|
| **Container** | Docker + Kubernetes | Scalability |
| **CI/CD** | GitHub Actions | ANKR standard |
| **Monitoring** | Prometheus + Grafana | Observability |
| **Logging** | Loki | Log aggregation |
| **Tracing** | OpenTelemetry | Distributed tracing |
| **CDN** | Cloudflare | Edge caching, DDoS |
| **Object Storage** | MinIO / S3 | Document storage |
| **Secrets** | HashiCorp Vault | Secret management |

---

## 8. Security & Guardrails

### 8.1 Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        SECURITY ARCHITECTURE                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  MOBILE APP SECURITY                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Certificate pinning for all API calls                             â”‚   â”‚
â”‚  â”‚ â€¢ SQLite encryption with SQLCipher (AES-256)                        â”‚   â”‚
â”‚  â”‚ â€¢ Secure Keychain/Keystore for tokens                               â”‚   â”‚
â”‚  â”‚ â€¢ Jailbreak/Root detection                                          â”‚   â”‚
â”‚  â”‚ â€¢ App integrity verification (Play Integrity / App Attest)          â”‚   â”‚
â”‚  â”‚ â€¢ Obfuscation with ProGuard/R8 (Android), bitcode (iOS)             â”‚   â”‚
â”‚  â”‚ â€¢ No sensitive data in logs/crash reports                           â”‚   â”‚
â”‚  â”‚ â€¢ Biometric authentication for sensitive operations                 â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  API SECURITY                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ TLS 1.3 mandatory                                                 â”‚   â”‚
â”‚  â”‚ â€¢ JWT with RS256 (asymmetric)                                       â”‚   â”‚
â”‚  â”‚ â€¢ Short-lived access tokens (15 min)                                â”‚   â”‚
â”‚  â”‚ â€¢ Refresh token rotation                                            â”‚   â”‚
â”‚  â”‚ â€¢ Rate limiting per user/IP/tenant                                  â”‚   â”‚
â”‚  â”‚ â€¢ Request signing for B2B API                                       â”‚   â”‚
â”‚  â”‚ â€¢ IP allowlisting for B2B (optional)                                â”‚   â”‚
â”‚  â”‚ â€¢ WAF with OWASP rules                                              â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  DATA SECURITY                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ Encryption at rest (AES-256)                                      â”‚   â”‚
â”‚  â”‚ â€¢ Encryption in transit (TLS 1.3)                                   â”‚   â”‚
â”‚  â”‚ â€¢ Field-level encryption for PII                                    â”‚   â”‚
â”‚  â”‚ â€¢ Key rotation every 90 days                                        â”‚   â”‚
â”‚  â”‚ â€¢ Data masking in logs                                              â”‚   â”‚
â”‚  â”‚ â€¢ Separate encryption keys per tenant                               â”‚   â”‚
â”‚  â”‚ â€¢ HSM for key management (production)                               â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  ACCESS CONTROL                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ â€¢ RBAC for admin dashboard                                          â”‚   â”‚
â”‚  â”‚ â€¢ Tenant isolation at database level                                â”‚   â”‚
â”‚  â”‚ â€¢ API scopes for B2B access                                         â”‚   â”‚
â”‚  â”‚ â€¢ Audit logging for all data access                                 â”‚   â”‚
â”‚  â”‚ â€¢ MFA for admin accounts                                            â”‚   â”‚
â”‚  â”‚ â€¢ Session management with device tracking                           â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 AI Guardrails

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          AI GUARDRAILS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  ON-DEVICE LLM CONSTRAINTS                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                 â”‚
â”‚                                                                             â”‚
â”‚  âœ… ALLOWED                           âŒ BLOCKED                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                           â”€â”€â”€â”€â”€â”€â”€â”€â”€                            â”‚
â”‚  â€¢ Financial education                â€¢ Investment advice (SEBI)           â”‚
â”‚  â€¢ Product explanations               â€¢ Specific stock picks               â”‚
â”‚  â€¢ Budget suggestions                 â€¢ Tax evasion tips                   â”‚
â”‚  â€¢ Bill reminders                     â€¢ Accessing raw transaction data     â”‚
â”‚  â€¢ General Q&A                        â€¢ Making transactions                â”‚
â”‚  â€¢ Gamification coaching              â€¢ Sharing user data                  â”‚
â”‚  â€¢ Insurance explainer                â€¢ Medical advice                     â”‚
â”‚                                       â€¢ Legal advice                       â”‚
â”‚                                                                             â”‚
â”‚  CONTENT FILTERS                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ Input Filters:                                                      â”‚   â”‚
â”‚  â”‚ â€¢ Block prompt injection attempts                                   â”‚   â”‚
â”‚  â”‚ â€¢ Sanitize PII in queries                                          â”‚   â”‚
â”‚  â”‚ â€¢ Rate limit queries per session                                    â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚ Output Filters:                                                     â”‚   â”‚
â”‚  â”‚ â€¢ Block financial advice (SEBI regulated)                          â”‚   â”‚
â”‚  â”‚ â€¢ Add disclaimers to suggestions                                    â”‚   â”‚
â”‚  â”‚ â€¢ No specific numbers without verification                          â”‚   â”‚
â”‚  â”‚ â€¢ Hallucination detection (confidence threshold)                    â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  RESPONSE TEMPLATES                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                        â”‚
â”‚                                                                             â”‚
â”‚  For investment questions:                                                 â”‚
â”‚  "Main specific investment advice nahi de sakta. Please SEBI-registered    â”‚
â”‚   advisor se baat karein. Lekin generally, [educational content]..."       â”‚
â”‚                                                                             â”‚
â”‚  For tax questions:                                                        â”‚
â”‚  "Tax rules complex hain aur aapki situation pe depend karte hain.         â”‚
â”‚   CA se consult karein. Generally, [educational content]..."               â”‚
â”‚                                                                             â”‚
â”‚  For medical/insurance claims:                                             â”‚
â”‚  "Medical advice dena mere scope mein nahi hai. Insurance claim ke         â”‚
â”‚   liye directly insurer se contact karein: [contact info]"                 â”‚
â”‚                                                                             â”‚
â”‚  AUDIT & MONITORING                                                        â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                         â”‚
â”‚                                                                             â”‚
â”‚  â€¢ Log all LLM queries (on-device, local only)                            â”‚
â”‚  â€¢ Sample-based quality review (anonymized)                                â”‚
â”‚  â€¢ User feedback collection                                                â”‚
â”‚  â€¢ Regular model evaluation for bias                                       â”‚
â”‚  â€¢ Incident response for harmful outputs                                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 9. Integration Patterns

### 9.1 Account Aggregator Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ACCOUNT AGGREGATOR INTEGRATION                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  SUPPORTED AAs                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚  â€¢ Setu (Primary)                                                          â”‚
â”‚  â€¢ Finvu (Backup)                                                          â”‚
â”‚  â€¢ OneMoney (Backup)                                                       â”‚
â”‚                                                                             â”‚
â”‚  FLOW                                                                      â”‚
â”‚  â”€â”€â”€â”€                                                                      â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Swayam  â”‚â”€â”€â”€â”€â–ºâ”‚ AA SDK  â”‚â”€â”€â”€â”€â–ºâ”‚ AA      â”‚â”€â”€â”€â”€â–ºâ”‚ FIP     â”‚              â”‚
â”‚  â”‚ App     â”‚     â”‚ (Setu)  â”‚     â”‚ Server  â”‚     â”‚ (Bank)  â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚       â”‚                                               â”‚                    â”‚
â”‚       â”‚         Consent       FI Request       FI Data                    â”‚
â”‚       â”‚         â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”€â”€â”€â”€â”€â”€â”€                    â”‚
â”‚       â”‚                                               â”‚                    â”‚
â”‚       â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚       â”‚         Encrypted FI Data                                          â”‚
â”‚       â”‚                                                                    â”‚
â”‚       â–¼                                                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                               â”‚
â”‚  â”‚ Local   â”‚  Decrypt + Store locally                                      â”‚
â”‚  â”‚ Storage â”‚  Only patterns synced to backend                              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                               â”‚
â”‚                                                                             â”‚
â”‚  DATA FETCHED                                                              â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                              â”‚
â”‚  â€¢ DEPOSIT: Savings, Current, FD, RD transactions                         â”‚
â”‚  â€¢ CREDIT_CARD: Statements, dues                                          â”‚
â”‚  â€¢ TERM_DEPOSIT: FD details                                               â”‚
â”‚  â€¢ RECURRING_DEPOSIT: RD details                                          â”‚
â”‚  â€¢ MUTUAL_FUNDS: Folio details (via RTAs)                                 â”‚
â”‚  â€¢ INSURANCE_POLICIES: Policy summary (via IIB)                           â”‚
â”‚                                                                             â”‚
â”‚  CONSENT ARTIFACT                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚  {                                                                         â”‚
â”‚    "purpose": "Personal finance management",                               â”‚
â”‚    "fiTypes": ["DEPOSIT", "CREDIT_CARD", "INSURANCE"],                    â”‚
â”‚    "consentStart": "2024-01-01",                                          â”‚
â”‚    "consentExpiry": "2025-01-01",                                         â”‚
â”‚    "frequency": { "unit": "DAY", "value": 1 },                            â”‚
â”‚    "dataLife": { "unit": "YEAR", "value": 1 }                             â”‚
â”‚  }                                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 9.2 Insurance Repository (IIB) Integration

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INSURANCE REPOSITORY INTEGRATION                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  IRDAI INSURANCE INFORMATION BUREAU (IIB)                                  â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                  â”‚
â”‚                                                                             â”‚
â”‚  Access Method: Via Account Aggregator (INSURANCE_POLICIES FI type)        â”‚
â”‚                                                                             â”‚
â”‚  DATA AVAILABLE                                                            â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                            â”‚
â”‚  â€¢ Policy number, type, status                                             â”‚
â”‚  â€¢ Sum assured / cover amount                                              â”‚
â”‚  â€¢ Premium amount and frequency                                            â”‚
â”‚  â€¢ Policy start and end date                                               â”‚
â”‚  â€¢ Insurer name                                                            â”‚
â”‚  â€¢ Nominee details (masked)                                                â”‚
â”‚                                                                             â”‚
â”‚  USE CASES                                                                 â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                                 â”‚
â”‚  1. Show all policies in one view                                          â”‚
â”‚  2. Renewal reminders                                                      â”‚
â”‚  3. Coverage gap analysis                                                  â”‚
â”‚  4. Duplicate policy detection                                             â”‚
â”‚  5. Sum assured adequacy check                                             â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 10. Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       DEPLOYMENT ARCHITECTURE                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                              CLOUDFLARE                                     â”‚
â”‚                          (CDN + WAF + DDoS)                                â”‚
â”‚                                 â”‚                                          â”‚
â”‚                                 â–¼                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚                      KUBERNETES CLUSTER                              â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                    INGRESS (Nginx)                             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  api.swayam.app â”‚ api.ankrbfc.com â”‚ admin.ankrbfc.com         â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                              â”‚                                       â”‚   â”‚
â”‚  â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚   â”‚
â”‚  â”‚         â”‚                    â”‚                    â”‚                 â”‚   â”‚
â”‚  â”‚         â–¼                    â–¼                    â–¼                 â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚   â”‚
â”‚  â”‚  â”‚ Swayam API  â”‚     â”‚ ankrBFC API â”‚     â”‚ Admin API   â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ (Consumer)  â”‚     â”‚ (B2B)       â”‚     â”‚             â”‚           â”‚   â”‚
â”‚  â”‚  â”‚ 3 replicas  â”‚     â”‚ 3 replicas  â”‚     â”‚ 2 replicas  â”‚           â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚   â”‚
â”‚  â”‚         â”‚                    â”‚                    â”‚                 â”‚   â”‚
â”‚  â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚   â”‚
â”‚  â”‚                              â”‚                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                    INTERNAL SERVICES                           â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Episode   â”‚ â”‚ Insight   â”‚ â”‚ Notificationâ”‚ â”‚ Analytics â”‚     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ Engine    â”‚ â”‚ Generator â”‚ â”‚ Service    â”‚ â”‚ Service   â”‚     â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                              â”‚                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                    ANKR CORE SERVICES                          â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  AI Proxy (4444) â”‚ EON Memory (4005) â”‚ Complymitra (4015)     â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                              â”‚                                       â”‚   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚  â”‚  â”‚                    DATA LAYER                                  â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ PostgreSQL  â”‚ â”‚ Redis       â”‚ â”‚ ClickHouse  â”‚             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚ (Primary +  â”‚ â”‚ (Cluster)   â”‚ â”‚ (Analytics) â”‚             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â”‚  Replicas)  â”‚ â”‚             â”‚ â”‚             â”‚             â”‚  â”‚   â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚  â”‚                                                                      â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚  EXTERNAL INTEGRATIONS                                                     â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                     â”‚
â”‚  â€¢ Account Aggregators (Setu, Finvu)                                       â”‚
â”‚  â€¢ SMS Gateway (Gupshup)                                                   â”‚
â”‚  â€¢ Push Notifications (FCM, APNs)                                          â”‚
â”‚  â€¢ Email (SES)                                                             â”‚
â”‚  â€¢ Payment Gateway (Razorpay - for rewards)                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 11. Compliance & Regulatory

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     REGULATORY COMPLIANCE                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  RBI REGULATIONS                                                           â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚  â€¢ Account Aggregator Framework compliance                                 â”‚
â”‚  â€¢ Digital lending guidelines (no direct lending, just lead gen)           â”‚
â”‚  â€¢ Data localization (all Indian user data in India)                       â”‚
â”‚  â€¢ KYC norms (via Complymitra)                                             â”‚
â”‚                                                                             â”‚
â”‚  IRDAI REGULATIONS                                                         â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚
â”‚  â€¢ Insurance Repository access via authorized channels                     â”‚
â”‚  â€¢ No insurance advice without license (education only)                    â”‚
â”‚  â€¢ Lead generation disclosure requirements                                 â”‚
â”‚                                                                             â”‚
â”‚  SEBI REGULATIONS                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚  â€¢ No investment advice (IA license required)                              â”‚
â”‚  â€¢ MF data via RTAs only                                                   â”‚
â”‚  â€¢ Clear disclaimers on all financial content                              â”‚
â”‚                                                                             â”‚
â”‚  IT ACT / DPDP                                                             â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                             â”‚
â”‚  â€¢ Explicit consent for data collection                                    â”‚
â”‚  â€¢ Right to erasure (delete data)                                          â”‚
â”‚  â€¢ Data breach notification (72 hours)                                     â”‚
â”‚  â€¢ Privacy policy in vernacular languages                                  â”‚
â”‚  â€¢ Grievance officer appointment                                           â”‚
â”‚                                                                             â”‚
â”‚  MEITY GUIDELINES                                                          â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                           â”‚
â”‚  â€¢ Intermediary guidelines compliance                                      â”‚
â”‚  â€¢ Content moderation for AI outputs                                       â”‚
â”‚                                                                             â”‚
â”‚  INTERNAL COMPLIANCE                                                       â”‚
â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                       â”‚
â”‚  â€¢ SOC 2 Type II certification (target)                                    â”‚
â”‚  â€¢ ISO 27001 certification (target)                                        â”‚
â”‚  â€¢ Regular VAPT (quarterly)                                                â”‚
â”‚  â€¢ Bug bounty program                                                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 12. Roadmap

### Phase 1: Foundation (Months 1-3)

- [ ] Swayam app MVP (React Native)
- [ ] Account Aggregator integration (Setu)
- [ ] On-device transaction categorization
- [ ] Basic Swayam Local LLM (English + Hindi)
- [ ] ankrBFC backend with episode engine
- [ ] Basic admin dashboard
- [ ] Privacy framework implementation

### Phase 2: Intelligence (Months 4-6)

- [ ] Pattern learning with pgvector
- [ ] Insight generation via AI Proxy
- [ ] B2B API launch
- [ ] First bank/insurer pilot
- [ ] Gamification engine
- [ ] 6 more languages

### Phase 3: Scale (Months 7-12)

- [ ] 10+ bank/insurer integrations
- [ ] Market intelligence features
- [ ] Advanced churn prediction
- [ ] White-label SDK
- [ ] All 22 languages
- [ ] SOC 2 certification

---

## Appendix A: Glossary

| Term | Definition |
|------|------------|
| **AA** | Account Aggregator - RBI regulated entity for financial data sharing |
| **FIP** | Financial Information Provider - Banks, insurers who provide data |
| **FIU** | Financial Information User - Entities who consume data |
| **IIB** | Insurance Information Bureau - IRDAI's insurance data repository |
| **Episode** | A behavioral event: state â†’ action â†’ outcome |
| **NBA** | Next Best Action - AI-recommended action for a customer |
| **Tenant** | A bank or insurer subscribed to ankrBFC |

---

## Appendix B: API Rate Limits

| Tier | Requests/Hour | Concurrent | Price |
|------|---------------|------------|-------|
| Basic | 1,000 | 10 | â‚¹50K/mo |
| Premium | 10,000 | 50 | â‚¹2L/mo |
| Enterprise | Unlimited | 200 | Custom |

---

## Appendix C: Setu Account Aggregator Implementation Guide

Since you have Setu API approvals, here's the practical implementation:

### C.1 Setu API Credentials

```typescript
// packages/bfc-core/src/integrations/setu-aa.ts

interface SetuConfig {
  clientId: string;        // From Setu dashboard
  clientSecret: string;    // From Setu dashboard
  productId: string;       // Your AA product instance ID
  baseUrl: string;         // https://aa-sandbox.setu.co (sandbox) or https://aa.setu.co (prod)
  redirectUrl: string;     // Your app's consent callback URL
}

// Environment variables
// SETU_CLIENT_ID=your_client_id
// SETU_CLIENT_SECRET=your_client_secret
// SETU_PRODUCT_ID=your_product_id
// SETU_BASE_URL=https://aa-sandbox.setu.co
// SETU_REDIRECT_URL=https://swayam.app/aa/callback
```

### C.2 Consent Flow Implementation

```typescript
// packages/bfc-core/src/integrations/setu-aa.ts

import crypto from 'crypto';

export class SetuAAClient {
  private config: SetuConfig;
  private accessToken: string | null = null;
  private tokenExpiry: Date | null = null;

  constructor(config: SetuConfig) {
    this.config = config;
  }

  /**
   * Step 1: Get OAuth token
   */
  async getAccessToken(): Promise<string> {
    if (this.accessToken && this.tokenExpiry && new Date() < this.tokenExpiry) {
      return this.accessToken;
    }

    const response = await fetch(`${this.config.baseUrl}/api/v2/oauth/token`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        clientId: this.config.clientId,
        clientSecret: this.config.clientSecret,
        grantType: 'client_credentials',
      }),
    });

    const data = await response.json();
    this.accessToken = data.accessToken;
    this.tokenExpiry = new Date(Date.now() + data.expiresIn * 1000);
    return this.accessToken;
  }

  /**
   * Step 2: Create consent request
   */
  async createConsentRequest(params: {
    customerMobile: string;
    fiTypes: ('DEPOSIT' | 'CREDIT_CARD' | 'TERM_DEPOSIT' | 'RECURRING_DEPOSIT' | 'MUTUAL_FUNDS' | 'INSURANCE_POLICIES')[];
    purpose?: string;
    durationMonths?: number;
  }): Promise<{ consentId: string; redirectUrl: string }> {
    const token = await this.getAccessToken();

    const now = new Date();
    const consentStart = now.toISOString();
    const consentExpiry = new Date(now.setMonth(now.getMonth() + (params.durationMonths || 12))).toISOString();
    const dataLifeExpiry = new Date(now.setMonth(now.getMonth() + 12)).toISOString();

    const consentDetail = {
      consentStart,
      consentExpiry,
      consentMode: 'VIEW', // VIEW, STORE, QUERY, or STREAM
      fetchType: 'PERIODIC', // ONETIME or PERIODIC
      consentTypes: ['TRANSACTIONS', 'PROFILE', 'SUMMARY'],
      fiTypes: params.fiTypes,
      DataConsumer: {
        id: this.config.productId,
      },
      Customer: {
        id: params.customerMobile + '@setu',
      },
      Purpose: {
        code: '102', // Personal Finance Management
        refUri: 'https://api.rebit.org.in/aa/purpose/102.xml',
        text: params.purpose || 'Personal finance tracking and insights',
        Category: { type: 'Personal Finance' },
      },
      FIDataRange: {
        from: new Date(Date.now() - 365 * 24 * 60 * 60 * 1000).toISOString(), // Last 1 year
        to: new Date().toISOString(),
      },
      DataLife: {
        unit: 'MONTH',
        value: 12,
      },
      Frequency: {
        unit: 'DAY',
        value: 1, // Fetch daily
      },
    };

    const response = await fetch(`${this.config.baseUrl}/consents`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`,
        'x-product-instance-id': this.config.productId,
      },
      body: JSON.stringify(consentDetail),
    });

    const data = await response.json();

    return {
      consentId: data.id,
      redirectUrl: data.url, // Redirect user to this URL for consent approval
    };
  }

  /**
   * Step 3: Check consent status
   */
  async getConsentStatus(consentId: string): Promise<{
    status: 'PENDING' | 'ACTIVE' | 'REJECTED' | 'EXPIRED' | 'REVOKED';
    signedConsent?: string;
  }> {
    const token = await this.getAccessToken();

    const response = await fetch(`${this.config.baseUrl}/consents/${consentId}`, {
      headers: {
        'Authorization': `Bearer ${token}`,
        'x-product-instance-id': this.config.productId,
      },
    });

    const data = await response.json();
    return {
      status: data.status,
      signedConsent: data.signedConsent,
    };
  }

  /**
   * Step 4: Fetch financial data (after consent is ACTIVE)
   */
  async fetchFinancialData(consentId: string): Promise<{
    accounts: AccountInfo[];
    transactions: Transaction[];
  }> {
    const token = await this.getAccessToken();

    // Create data session
    const sessionResponse = await fetch(`${this.config.baseUrl}/sessions`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
        'Authorization': `Bearer ${token}`,
        'x-product-instance-id': this.config.productId,
      },
      body: JSON.stringify({
        consentId,
        DataRange: {
          from: new Date(Date.now() - 90 * 24 * 60 * 60 * 1000).toISOString(), // Last 90 days
          to: new Date().toISOString(),
        },
      }),
    });

    const sessionData = await sessionResponse.json();
    const sessionId = sessionData.id;

    // Poll for data (Setu processes asynchronously)
    let attempts = 0;
    const maxAttempts = 30;

    while (attempts < maxAttempts) {
      const dataResponse = await fetch(`${this.config.baseUrl}/sessions/${sessionId}`, {
        headers: {
          'Authorization': `Bearer ${token}`,
          'x-product-instance-id': this.config.productId,
        },
      });

      const data = await dataResponse.json();

      if (data.status === 'COMPLETED') {
        return this.parseFinancialData(data.FI);
      } else if (data.status === 'FAILED') {
        throw new Error(`Data fetch failed: ${data.reason}`);
      }

      // Wait 2 seconds before retry
      await new Promise(resolve => setTimeout(resolve, 2000));
      attempts++;
    }

    throw new Error('Data fetch timed out');
  }

  /**
   * Parse FI data into standardized format
   */
  private parseFinancialData(fiData: any[]): {
    accounts: AccountInfo[];
    transactions: Transaction[];
  } {
    const accounts: AccountInfo[] = [];
    const transactions: Transaction[] = [];

    for (const fi of fiData) {
      // Decrypt FI data (Setu provides encrypted data)
      const decryptedData = this.decryptFIData(fi);

      switch (fi.fiType) {
        case 'DEPOSIT':
          accounts.push({
            type: 'SAVINGS',
            bankName: decryptedData.Issuer,
            accountNumber: this.maskAccountNumber(decryptedData.linkRefNumber),
            balance: parseFloat(decryptedData.Summary?.currentBalance || '0'),
            ifsc: decryptedData.Branch?.ifsc,
          });

          // Parse transactions
          for (const txn of decryptedData.Transactions?.Transaction || []) {
            transactions.push({
              date: new Date(txn.transactionTimestamp),
              type: txn.type as 'CREDIT' | 'DEBIT',
              amount: parseFloat(txn.amount),
              description: txn.narration,
              category: this.categorizeTransaction(txn.narration),
              balance: parseFloat(txn.currentBalance),
            });
          }
          break;

        case 'CREDIT_CARD':
          accounts.push({
            type: 'CREDIT_CARD',
            bankName: decryptedData.Issuer,
            cardNumber: this.maskCardNumber(decryptedData.linkRefNumber),
            balance: -parseFloat(decryptedData.Summary?.totalAmountDue || '0'),
            limit: parseFloat(decryptedData.Summary?.creditLimit || '0'),
          });
          break;

        case 'MUTUAL_FUNDS':
          accounts.push({
            type: 'INVESTMENT',
            fundName: decryptedData.SchemeName,
            units: parseFloat(decryptedData.Units),
            nav: parseFloat(decryptedData.NAV),
            currentValue: parseFloat(decryptedData.CurrentValue),
          });
          break;

        case 'INSURANCE_POLICIES':
          accounts.push({
            type: 'INSURANCE',
            policyNumber: decryptedData.PolicyNumber,
            insurer: decryptedData.InsurerName,
            sumAssured: parseFloat(decryptedData.SumAssured),
            premium: parseFloat(decryptedData.Premium),
            renewalDate: decryptedData.RenewalDate,
          });
          break;
      }
    }

    return { accounts, transactions };
  }

  /**
   * Decrypt FI data using your key (received during consent)
   */
  private decryptFIData(encryptedData: any): any {
    // In production, use the key pair you generated and shared with Setu
    // FI data is encrypted with your public key
    // Decrypt with your private key
    const privateKey = process.env.SETU_PRIVATE_KEY!;

    // Base64 decode and decrypt
    const decrypted = crypto.privateDecrypt(
      {
        key: privateKey,
        padding: crypto.constants.RSA_PKCS1_OAEP_PADDING,
        oaepHash: 'sha256',
      },
      Buffer.from(encryptedData.encryptedFI, 'base64')
    );

    return JSON.parse(decrypted.toString());
  }

  /**
   * Categorize transaction based on narration (AI-powered)
   */
  private categorizeTransaction(narration: string): string {
    const lower = narration.toLowerCase();

    if (/swiggy|zomato|food|restaurant|cafe/.test(lower)) return 'FOOD_DINING';
    if (/amazon|flipkart|myntra|shopping/.test(lower)) return 'SHOPPING';
    if (/uber|ola|petrol|fuel|parking/.test(lower)) return 'TRANSPORT';
    if (/netflix|spotify|hotstar|prime/.test(lower)) return 'ENTERTAINMENT';
    if (/hospital|medical|pharmacy|apollo|fortis/.test(lower)) return 'HEALTHCARE';
    if (/electricity|gas|water|bill|airtel|jio/.test(lower)) return 'BILLS_UTILITIES';
    if (/rent|housing|maintenance/.test(lower)) return 'RENT';
    if (/salary|credit|interest/.test(lower)) return 'INCOME';
    if (/emi|loan|hdfc|icici|sbi/.test(lower)) return 'EMI';
    if (/mutual|mf|sip|investment/.test(lower)) return 'INVESTMENT';
    if (/insurance|premium|lic/.test(lower)) return 'INSURANCE';

    return 'OTHER';
  }

  private maskAccountNumber(num: string): string {
    return 'XXXX' + num.slice(-4);
  }

  private maskCardNumber(num: string): string {
    return 'XXXX-XXXX-XXXX-' + num.slice(-4);
  }
}

interface AccountInfo {
  type: 'SAVINGS' | 'CURRENT' | 'CREDIT_CARD' | 'INVESTMENT' | 'INSURANCE';
  bankName?: string;
  accountNumber?: string;
  cardNumber?: string;
  balance?: number;
  limit?: number;
  ifsc?: string;
  fundName?: string;
  units?: number;
  nav?: number;
  currentValue?: number;
  policyNumber?: string;
  insurer?: string;
  sumAssured?: number;
  premium?: number;
  renewalDate?: string;
}

interface Transaction {
  date: Date;
  type: 'CREDIT' | 'DEBIT';
  amount: number;
  description: string;
  category: string;
  balance: number;
}
```

### C.3 Swayam Integration

```typescript
// packages/voice/src/handlers/account-link.ts

import { SetuAAClient } from '@ankr/bfc-core';

export async function handleAccountLinkIntent(
  userId: string,
  mobile: string,
  language: string
): Promise<{ message: string; redirectUrl?: string }> {
  const setuClient = new SetuAAClient({
    clientId: process.env.SETU_CLIENT_ID!,
    clientSecret: process.env.SETU_CLIENT_SECRET!,
    productId: process.env.SETU_PRODUCT_ID!,
    baseUrl: process.env.SETU_BASE_URL!,
    redirectUrl: process.env.SETU_REDIRECT_URL!,
  });

  // Create consent request
  const { consentId, redirectUrl } = await setuClient.createConsentRequest({
    customerMobile: mobile,
    fiTypes: ['DEPOSIT', 'CREDIT_CARD', 'MUTUAL_FUNDS', 'INSURANCE_POLICIES'],
    purpose: 'Personal finance tracking with Swayam',
    durationMonths: 12,
  });

  // Store consent ID for this user
  await storeConsentMapping(userId, consentId);

  const messages: Record<string, string> = {
    en: 'I\'ll connect your bank accounts securely. Please approve the consent request.',
    hi: 'à¤®à¥ˆà¤‚ à¤†à¤ªà¤•à¥‡ à¤¬à¥ˆà¤‚à¤• à¤–à¤¾à¤¤à¥‹à¤‚ à¤•à¥‹ à¤¸à¥à¤°à¤•à¥à¤·à¤¿à¤¤ à¤°à¥‚à¤ª à¤¸à¥‡ à¤œà¥‹à¤¡à¤¼à¥‚à¤‚à¤—à¤¾à¥¤ à¤•à¥ƒà¤ªà¤¯à¤¾ à¤¸à¤¹à¤®à¤¤à¤¿ à¤…à¤¨à¥à¤°à¥‹à¤§ à¤•à¥‹ à¤¸à¥à¤µà¥€à¤•à¥ƒà¤¤ à¤•à¤°à¥‡à¤‚à¥¤',
  };

  return {
    message: messages[language] || messages.en,
    redirectUrl,
  };
}
```

### C.4 Webhook Handler for Consent Notifications

```typescript
// apps/bfc-api/src/routes/webhooks/setu.ts

import { FastifyInstance } from 'fastify';
import { SetuAAClient } from '@ankr/bfc-core';
import { bfcEpisodeRecorder } from '@ankr/intelligence';

export async function setuWebhookRoutes(app: FastifyInstance) {
  // Setu sends notifications when consent status changes
  app.post('/webhooks/setu/consent', {
    config: {
      rawBody: true, // For signature verification
    },
  }, async (request, reply) => {
    const signature = request.headers['x-setu-signature'] as string;

    // Verify webhook signature
    if (!verifySetuSignature(request.rawBody, signature)) {
      return reply.code(401).send({ error: 'Invalid signature' });
    }

    const { consentId, consentStatus, notifierType } = request.body as any;

    // Get user from consent mapping
    const userId = await getUserFromConsent(consentId);
    if (!userId) {
      return reply.code(404).send({ error: 'Consent not found' });
    }

    if (consentStatus === 'ACTIVE') {
      // Consent approved - fetch data
      const setuClient = new SetuAAClient(getSetuConfig());
      const { accounts, transactions } = await setuClient.fetchFinancialData(consentId);

      // Store in user's profile (on-device for consumer, patterns in BFC)
      await storeUserFinancialProfile(userId, accounts);
      await analyzeAndStorePatterns(userId, transactions);

      // Record episode
      await bfcEpisodeRecorder.recordEpisode({
        userId,
        sessionId: `aa_${consentId}`,
        intent: { primary: 'account_link', domain: 'banking', confidence: 1.0 },
        entities: {},
        messages: [],
        outcome: {
          success: true,
          result: `Linked ${accounts.length} accounts`,
          details: { accountCount: accounts.length },
        },
      });

      // Send notification to user
      await sendPushNotification(userId, {
        title: 'Accounts Linked!',
        body: `${accounts.length} accounts connected to Swayam`,
      });
    } else if (consentStatus === 'REJECTED') {
      // User rejected consent
      await bfcEpisodeRecorder.recordEpisode({
        userId,
        sessionId: `aa_${consentId}`,
        intent: { primary: 'account_link', domain: 'banking', confidence: 1.0 },
        entities: {},
        messages: [],
        outcome: {
          success: false,
          result: 'Consent rejected by user',
        },
      });
    }

    return reply.send({ status: 'ok' });
  });
}
```

### C.5 Required Approvals Checklist

| Requirement | Status | Notes |
|-------------|--------|-------|
| **Setu Account** | Required | Sign up at https://setu.co |
| **FIU License** | Required for Prod | Apply via RBI (can use sandbox without) |
| **Product Instance** | Required | Create in Setu dashboard |
| **Key Pair** | Required | Generate RSA key pair for FI decryption |
| **Redirect URL** | Required | HTTPS URL in your app |
| **Webhook URL** | Required | For consent status notifications |

### C.6 Testing in Sandbox

```bash
# Test mobile numbers in Setu Sandbox
# Use these for testing without real bank accounts:
# 9999999999 - Has multiple accounts
# 8888888888 - Has single account
# 7777777777 - Will reject consent

# Test flow
curl -X POST https://aa-sandbox.setu.co/consents \
  -H "Authorization: Bearer $TOKEN" \
  -H "x-product-instance-id: $PRODUCT_ID" \
  -d '{
    "Customer": { "id": "9999999999@setu" },
    "fiTypes": ["DEPOSIT", "CREDIT_CARD"],
    ...
  }'
```

---

*Document Version: 1.0*
*Last Updated: January 2026*
*Author: ANKR Labs*

**Jai Guru Ji**
